!function e(t,o,n){function r(i,c){if(!o[i]){if(!t[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var a=o[i]={exports:{}};t[i][0].call(a.exports,function(e){var o=t[i][1][e];return r(o?o:e)},a,a.exports,e,t,o,n)}return o[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e){var t=e("./protocol"),o=e("./mock-server"),n=e("./mock-socket"),r=e("./helpers/subject"),s=e("./helpers/global-context");s.Subject=r,s.Protocol=t,s.MockSocket=n,s.MockServer=o},{"./helpers/global-context":3,"./helpers/subject":5,"./mock-server":8,"./mock-socket":9,"./protocol":10}],2:[function(e,t){function o(e,t){n.setTimeout(function(t){e.call(t)},4,t)}var n=e("./global-context");t.exports=o},{"./global-context":3}],3:[function(e,t){(function(e){var o=window||e;if(!o)throw new Error("Unable to set the global context to either window or global.");t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){function o(e,t,o){var n=!1,r=!1,s="",i=null,c=null,l=null;try{var u=new MessageEvent(e);u.initMessageEvent(e,n,r,t,o,s),Object.defineProperties(u,{target:{get:function(){return l},set:function(e){l=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}catch(a){var u={type:e,bubbles:n,cancelable:r,data:t,origin:o,lastEventId:s,source:i,ports:c,defaultPrevented:!1,returnValue:!0,clipboardData:void 0};Object.defineProperties(u,{target:{get:function(){return l},set:function(e){l=e}},srcElement:{get:function(){return this.target}},currentTarget:{get:function(){return this.target}}})}return u}t.exports=o},{}],5:[function(e,t){function o(){this.list={}}o.prototype={observe:function(e,t,o){return"string"!=typeof e||"function"!=typeof t||o&&"object"!=typeof o?!1:(this.list[e]||(this.list[e]=[]),void this.list[e].push({callback:t,context:o}))},clearAll:function(e){return this.verifyNamespaceArg(e)?void(this.list[e]=[]):!1},notify:function(e){var t=Array.prototype.slice.call(arguments,1);if(!this.verifyNamespaceArg(e))return!1;for(var o=0,n=this.list[e].length;n>o;o++)this.list[e][o].callback.apply(this.list[e][o].context,t)},notifyOnlyFor:function(e,t){var o=Array.prototype.slice.call(arguments,2);if(!this.verifyNamespaceArg(t))return!1;for(var n=0,r=this.list[t].length;r>n;n++)this.list[t][n].context===e&&this.list[t][n].callback.apply(this.list[t][n].context,o)},verifyNamespaceArg:function(e){return"string"==typeof e&&this.list[e]?!0:!1}},t.exports=o},{}],6:[function(e,t){function o(e){var t=document.createElement("a");return t.href=e,"/"!==t.pathname&&""!==t.pathname||"/"===e.slice(-1)||(e+="/"),e}t.exports=o},{}],7:[function(e,t){function o(e){var t=function(t){return function(o){o.target=e,t.apply(e,arguments)}};Object.defineProperties(e,{onopen:{enumerable:!0,get:function(){return e._onopen},set:function(o){e._onopen=t(o),e.protocol.subject.observe("clientOnOpen",e._onopen,e)}},onmessage:{enumerable:!0,get:function(){return e._onmessage},set:function(o){e._onmessage=t(o),e.protocol.subject.observe("clientOnMessage",e._onmessage,e)}},onclose:{enumerable:!0,get:function(){return e._onclose},set:function(o){e._onclose=t(o),e.protocol.subject.observe("clientHasLeft",e._onclose,e)}},onerror:{enumerable:!0,get:function(){return e._onerror},set:function(o){e._onerror=t(o),e.protocol.subject.observe("clientOnError",e._onerror,e)}}})}t.exports=o},{}],8:[function(e,t){function o(e){var t=new i.Protocol;this.url=r(e),i.MockSocket.protocol[this.url]=t,this.protocol=t,t.server=this}var n=(e("./protocol"),e("./helpers/delay")),r=(e("./helpers/subject"),e("./helpers/url-transform")),s=e("./helpers/message-event"),i=e("./helpers/global-context");o.prototype={protocol:null,on:function(e,t){var o;if("function"!=typeof t)return!1;switch(e){case"connection":o="clientHasJoined";break;case"message":o="clientHasSentMessage";break;case"close":o="clientHasLeft"}"string"==typeof o&&this.protocol.setServerOnCallback(o,t,this)},send:function(e){n(function(){this.protocol.sendMessageToClients(s("message",e,this.url))},this)},close:function(){n(function(){this.protocol.closeConnection(s("close",null,this.url))},this)}},t.exports=o},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/subject":5,"./helpers/url-transform":6,"./protocol":10}],9:[function(e,t){function o(e){this.binaryType="blob",this.url=r(e),this.readyState=i.MockSocket.CONNECTING,this.protocol=i.MockSocket.protocol[this.url],c(this),n(function(){this.protocol.clientIsConnecting(this,this._updateReadyState)},this)}var n=e("./helpers/delay"),r=e("./helpers/url-transform"),s=e("./helpers/message-event"),i=e("./helpers/global-context"),c=e("./helpers/websocket-properties");o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.LOADING=3,o.CLOSED=4,o.protocol={},o.prototype={_onopen:null,_onmessage:null,_onerror:null,_onclose:null,protocol:null,send:function(e){n(function(){this.protocol.sendMessageToServer(s("message",e,this.url))},this)},close:function(){n(function(){this.protocol.closeConnection(s("close",null,this.url))},this)},_updateReadyState:function(e){e>=0&&4>=e&&(this.readyState=e)}},t.exports=o},{"./helpers/delay":2,"./helpers/global-context":3,"./helpers/message-event":4,"./helpers/url-transform":6,"./helpers/websocket-properties":7}],10:[function(e,t){function o(){this.subject=new r.Subject}var n=e("./helpers/message-event"),r=e("./helpers/global-context");o.prototype={server:null,clientIsConnecting:function(e,t){return this.subject.observe("updateReadyState",t,e),this.server?(this.subject.notifyOnlyFor(e,"updateReadyState",r.MockSocket.OPEN),this.subject.notify("clientHasJoined",this.server),void this.subject.notifyOnlyFor(e,"clientOnOpen",n("open",null,this.server.url))):(this.subject.notify(e,"updateReadyState",r.MockSocket.CLOSED),this.subject.notifyOnlyFor(e,"clientOnError"),!1)},closeConnection:function(e){this.subject.notify("updateReadyState",r.MockSocket.CLOSED),this.subject.notify("clientHasLeft",e)},sendMessageToServer:function(e){this.subject.notify("clientHasSentMessage",e)},sendMessageToClients:function(e){this.subject.notify("clientOnMessage",e)},setServerOnCallback:function(e,t,o){this.subject.observe(e,t,o)}},t.exports=o},{"./helpers/global-context":3,"./helpers/message-event":4}]},{},[1]);