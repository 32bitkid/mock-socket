!function e(t,o,n){function s(i,c){if(!o[i]){if(!t[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var a=o[i]={exports:{}};t[i][0].call(a.exports,function(e){var o=t[i][1][e];return s(o?o:e)},a,a.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e){var t=e("./server.js"),o=e("./protocol.js"),n=e("./subject.js"),s=e("./websocket.js");window.MockSocket=s,window.WebSocketServer=t,window.Protocol=o,window.Subject=n},{"./protocol.js":5,"./server.js":6,"./subject.js":7,"./websocket.js":8}],2:[function(e,t){function o(e){var t=document.createElement("a");return t.href=e,"/"!==t.pathname&&""!==t.pathname||"/"===e.slice(-1)||(e+="/"),e}t.exports=o},{}],3:[function(e,t){function o(e,t){var o={currentTarget:{url:t},data:e};return o}t.exports=o},{}],4:[function(e,t){function o(e){Object.defineProperties(e,{onopen:{enumerable:!0,get:function(){return e._onopen},set:function(t){e._onopen=t,e.protocol.subject.observe("clientOnOpen",t,e)}},onmessage:{enumerable:!0,get:function(){return e._onmessage},set:function(t){e._onmessage=t,e.protocol.subject.observe("clientOnMessage",t,e)}},onclose:{enumerable:!0,get:function(){return e._onclose},set:function(t){e._onclose=t,e.protocol.subject.observe("clientHasLeft",t,e)}}})}e("./websocket-message");t.exports=o},{"./websocket-message":3}],5:[function(e,t){function o(e){this.subject=e,this.subject.observe("clientAttemptingToConnect",this.clientAttemptingToConnect,this)}var n=e("./helpers/websocket-message");o.prototype={server:null,clientAttemptingToConnect:function(){return this.server?(this.subject.notify("updateReadyState",MockSocket.OPEN),this.subject.notify("clientHasJoined",this.server),void this.subject.notify("clientOnOpen",n(null,this.server.url))):(this.subject.notify("updateReadyState",MockSocket.CLOSED),this.subject.notify("clientOnError"),!1)}},t.exports=o},{"./helpers/websocket-message":3}],6:[function(e,t){function o(e){this.url=e;var t=new s,o=new r(t);window.MockSocket.protocol=o,this.protocol=o,o.server=this}var n=e("./helpers/websocket-message"),s=e("./subject"),r=e("./protocol");o.prototype={protocol:null,on:function(e,t){var o;switch(e){case"connection":o="clientHasJoined";break;case"message":o="clientHasSentMessage";break;case"close":o="clientHasLeft"}this.protocol.subject.observe(o,t,this)},send:function(e){this.protocol.subject.notify("clientOnMessage",n(e,this.url))}},t.exports=o},{"./helpers/websocket-message":3,"./protocol":5,"./subject":7}],7:[function(e,t){function o(){this._list={}}o.prototype={observe:function(e,t,o){return this._list[e]||(this._list[e]=[]),"function"!=typeof t?(console.log("The callback which is trying to observe namespace: "+e+" is not a function."),!1):void this._list[e].push({callback:t,context:o})},unobserve:function(e,t){for(var o=0,n=this._list[e].length;n>o;o++)if(this._list[e][o]===t)return this._list[e].splice(o,1),!0;return!1},clearAll:function(e){return"string"!=typeof e?(console.log("A valid namespace must be passed into clearAll."),!1):void(this._list[e]=[])},notify:function(e){var t=Array.prototype.slice.call(arguments,1);if(!this._list[e])return console.log("Trying to notify on namespace: "+e+" but an observer has never been added to it."),!1;for(var o=0,n=this._list[e].length;n>o;o++)"function"==typeof this._list[e][o].callback?this._list[e][o].callback.apply(this._list[e][o].context,t):console.log("An observer for the namespace: "+e+" is not a function.")}},t.exports=o},{}],8:[function(e,t){function o(e){this.binaryType="blob",this.url=n(e),this.readyState=o.CONNECTING,this.protocol=o.protocol,r(this),window.setTimeout(function(e){e.protocol.subject.observe("updateReadyState",e._updateReadyState,e),e.protocol.subject.notify("clientAttemptingToConnect")},0,this)}var n=e("./helpers/url-transform"),s=e("./helpers/websocket-message"),r=e("./helpers/websocket-properties");o.PROTOCOL=null,o.CONNECTING=0,o.OPEN=1,o.CLOSING=2,o.LOADING=3,o.CLOSED=4,o.prototype={_onopen:null,_onmessage:null,_onerror:null,_onclose:null,protocol:null,send:function(e){this.protocol.subject.notify("clientHasSentMessage",s(e,this.url))},close:function(){this.protocol.subject.notify("clientHasLeft",s(null,this.url))},_updateReadyState:function(e){this.readyState=e}},t.exports=o},{"./helpers/url-transform":2,"./helpers/websocket-message":3,"./helpers/websocket-properties":4}]},{},[1]);